<%- model_class = Restaurant -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @restaurant.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %>:</strong></dt>
  <dd><%= @restaurant.description %></dd>
  <dt><strong><%= model_class.human_attribute_name(:address) %>:</strong></dt>
  <dd><%= @restaurant.address %></dd>
  <dt><strong><%= model_class.human_attribute_name(:promoted) %>:</strong></dt>
  <dd><%= @restaurant.promoted == true ? "Yap" : "Nope" %></dd>
  <dt><strong><%= model_class.human_attribute_name(:rating) %>:</strong></dt>
  <dd><%= star_rating @restaurant %></dd>
  <dt><strong><%= model_class.human_attribute_name(:image_url) %>:</strong>
  <div class='restaurant-image'><img src=
    "<%= @restaurant.image_url %>"
  </div>
  </dt>
  <dd><%= @restaurant.image_url %></dd>


<dt>&nbsp;</dt>
  
  <dd>
     <% if @restaurant.latitude && @restaurant.longitude %>
    <div id="map">
     
      <script>
        var map = new GMaps({
          div: '#map',
          lat: '<%= @restaurant.latitude %>',
          lng: '<%= @restaurant.longitude %>'
        } );

        map.addMarker({
          lat: <%= @restaurant.latitude %>,
          lng: <%= @restaurant.longitude %>,
          title: '<%= @restaurant.name %>',
          infoWindow: {
            content: ' <%= @restaurant.address %>'
          }

        });
      </script>


    </div>
    <% else %>
    No Map
    <% end %>
</dd>
</dl>
<hr/>
<% if user_signed_in? %>
<% if !current_user.reviewed?(@restaurant) %>
<%= link_to 'Add a review', new_restaurant_review_path(@restaurant), class: ['btn', 'btn-default'] %>
<% end %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_restaurant_path(@restaurant), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              restaurant_path(@restaurant),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<% end %>

<%= link_to t('.back', :default => t("helpers.links.back")),
              restaurants_path, :class => 'btn btn-default'  %>
<hr>
<div class='row'>
  <% @restaurant.reviews.each do |review| %>
    <div class='col-sm-6 alert <%= review_color(review) %>'>
      <h4>Reviewer: <%= review.user.email %></h4>
      <%= review.content %> - <%= star_rating review %>
    </div>
  <% end %>
</div>